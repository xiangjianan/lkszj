<!DOCTYPE html>
<html lang="en" class="csstransforms csstransforms3d csstransitions">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ffffff">
    <title>作品征集</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="stylesheet" href="https://v4.bootcss.com/docs/4.6/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="iconfont/iconfont.css">
    <link rel="stylesheet" href="css/animate.0.1.0.css">
    <link rel="stylesheet" href="css/index.0.1.1.css">
</head>

<body>
    <div class="header">
        <div class="header-left">
            <div class="header-left-logo">
                <a href="https://space.bilibili.com/125526/" target="_blank" rel="noopener noreferrer">
                    <img src="img/logo.svg" alt="logo">
                </a>
            </div>
        </div>
        <div class="header-center">
            <div class="header-title">
                <h2></h2>
            </div>
        </div>
        <div class="header-right">
            <div class="time">
                <span id="t_h"></span>
            </div>
            <div class="time time-m">
                </span><span id="t_m">
            </div>
            <div class="time">
                <span id="t_s"></span>
            </div>
            <div class="time-day">
                <span class="iconfont" id="t_d"></span>
            </div>
        </div>
        <div class="outer">

        </div>
    </div>
    <div class="footer">
        <div class="disclaimer">
            <div>
                <span>Copyright © 2022 <a ontouchstart="" href="https://space.bilibili.com/125526/" target="_blank" rel="nofollow noreferrer">-LKs-</a> <a ontouchstart="" href="https://github.com/xiangjianan/" target="_blank" rel="nofollow noreferrer">xiangjianan</a></span>
                <span> | </span>
                <span ontouchstart="" class="disclaimer-btn">活动介绍&免责声明</span>
            </div>
        </div>
    </div>
    <div class="center">
        <div class="center-row center-row-input">
            <div class="page-input animate__animated col-md-6 offset-md-3">
                <div class="col-md-12">
                    <input id="author" type="text" placeholder="作者">
                </div>
                <div class="col-md-12">
                    <input id="opus" type="text" placeholder="作品名">
                </div>
                <div class="col-md-12">
                    <input id="tel" type="text" placeholder="联系方式(QQ/微信/邮箱等)">
                </div>
                <div class="col-md-12">
                    <input id="link" type="text" placeholder="作品链接(网盘Link，视频/音乐/图库网址等)">
                </div>
                <div class="col-md-12">
                    <input id="about" type="text" placeholder="作品说明(创作灵感，你的想法，希望大家了解的信息等等)">
                </div>
                <br>
                <div class="col-md-12">
                    <span id="send" class="btn-center btn btn-secondary">发送</span>
                    <span class="go-page-home btn-center btn btn-secondary">返回</span>
                </div>
            </div>
        </div>
    </div>
    <!-- 弹框部分 -->
    <div class="center center-notice-modal">
        <div class="center-row center-row-notice">
            <div class="notice-modal animate__animated animate__fadeOutDown col-md-6 offset-md-3">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="notice-msg"></h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="center center-alert-modal">
        <div class="center-row center-row-alert">
            <div class="alert-modal animate__animated animate__fadeOutDown col-md-6 offset-md-3">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="alert-title"></h2>
                    </div>
                    <div class="modal-body">
                        <div class="col-md-8 offset-md-2">
                            <p class="alert-title">作者</p>
                            <p class="alert-author"></p>
                            <p class="alert-title">作品名</p>
                            <p class="alert-opus"></p>
                            <p class="alert-title">联系方式</p>
                            <p class="alert-tel"></p>
                            <p class="alert-title">作品链接</p>
                            <p class="alert-link"></p>
                            <p class="alert-title">作品说明</p>
                            <p class="alert-about"></p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="col-md-6">
                            <span class="alert-no btn btn-secondary">再想想</span>
                        </div>
                        <div class="col-md-6">
                            <span class="alert-yes btn btn-secondary">确认发送</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="center">
        <div class="center-row center-row-home">
            <div class="page-home animate__animated col-md-6 offset-md-3">
                <div class="col-md-12">
                    <h1 class="title animate__animated animate__zoomInDown">与世界分享你创造的美好</h1>
                </div>
                <br>
                <div class="col-md-12">
                    <span ontouchstart="" class="go-page-input btn btn-secondary animate__animated">投稿</span>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    let disclaimer = `
        <div class="confirms container">
            <div class="col-md-8 offset-md-2">
                <p class="confirm-title">活动信息</p>
                <div class="confirm-text">
                    <p>每个人在生命中都会创造一些美好的东西，它们往往倾注了我们大量的心血，如果你愿意与大家分享你的作品，欢迎大力投稿参与这次活动:D</p>
                    <p>详情请见 - BVXXXXXXXXX</p>
                    <p class="little-title">【基本规则】</p>
                    <p>1. 可以投稿任何类型的作品，音乐、绘画、摄影、文字、有实体的手工/雕塑/模型、甚至某个天马行空的想法等等。</p>
                    <p>2. 作品需要上传到网盘或视频平台(实物作品可以拍照/拍视频后上传)。</p>
                    <p>3. 这件作品需要由你本人独立/主要完成，不能为别人代投。</p>
                    <p>4. 这件作品的完成时间需要在2020年以后。</p>
                    <p>5. 这件作品不能存在版权/知识产权/著作权/原创性等方面的争议。</p>
                    <p>6. 请准确填写投稿信息，以便获奖后我可以联系到你。</p>
                    <p class="little-title">【活动信息】</p>
                    <p>1. 征集从2022年x月x日开始持续到2022年x月x日，此后投稿功能会被关闭。</p>
                    <p>2. 征集将选出金奖、银奖和铜奖以及10个优秀提名，奖品分别是：</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;金奖 - 人民币X元+板状海蓝宝石晶体共生叶钠长石 (配图)</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;银奖 - 人民币X元+连晶黄铁矿 (配图)</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;铜奖 - 人民币X元+荧光方解石晶体 (配图)</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;优秀奖 - ?</p>
                    <p class="little-title">【免责声明】</p>
                    <p>投稿作品即表示你已经阅读并同意以下说明：</p>
                    <p>1. 你清楚并同意上传的作品可能会被公开分享。</p>
                    <p>2. 全程遵守国家法律与政策，请勿上传各类违规/敏感内容，即使上传也会被人工筛选和删除。</p>
                    <p>3. 避免上传非原创、未经创作者本人许可、存在大量参考借鉴的内容，对作品的原创性负责。</p>
                    <p>4. 本征集为非盈利活动，无任何利益相关。</p>
                    <p>5. 如活动期间遇到不可抗力或其他意外因素，征集可能会被迫中止。</p>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <span class="btn not col-md-12">再想想</span>
                    </div>
                    <div class="col-md-6">
                        <span class="btn sure col-md-12">确认同意</span>
                    </div>
                </div>
            </div>
        </div>`;

    // 获取弹窗元素
    let notice_modal = document.getElementsByClassName("notice-modal")[0];
    let notice_msg = document.getElementById('notice-msg');
    let alert_modal = document.getElementsByClassName("alert-modal")[0];
    let alert_title = document.getElementById('alert-title');
    // 弹窗事件
    function noticeModal(msg, time) {
        notice_msg.innerHTML = msg;
        notice_modal.style.display = 'block';
        notice_modal.classList.remove('animate__fadeOutDown');
        notice_modal.classList.add('animate__fadeInDown');
        document.getElementsByClassName('center-notice-modal')[0].style.zIndex = 2000;
        setTimeout(() => {
            notice_modal.classList.remove('animate__fadeInDown');
            notice_modal.classList.add('animate__fadeOutDown');
            document.getElementsByClassName('center-notice-modal')[0].style.zIndex = 0;
        }, time);
    }
    function alertModal(msg) {
        let author = document.getElementById('author').value;
        let opus = document.getElementById('opus').value;
        let tel = document.getElementById('tel').value;
        let link = document.getElementById('link').value;
        let about = document.getElementById('about').value;
        alert_title.innerHTML = msg;
        alert_modal.style.display = 'block';
        document.getElementsByClassName('alert-author')[0].innerHTML = author;
        document.getElementsByClassName('alert-opus')[0].innerHTML = opus;
        document.getElementsByClassName('alert-tel')[0].innerHTML = tel;
        document.getElementsByClassName('alert-link')[0].innerHTML = link;
        document.getElementsByClassName('alert-about')[0].innerHTML = about;
        alert_modal.classList.remove('animate__fadeOutDown');
        alert_modal.classList.add('animate__fadeInDown');
        document.getElementsByClassName('center-alert-modal')[0].style.zIndex = 2000;
        document.getElementsByClassName('alert-no')[0].onclick = function () {
            alert_modal.classList.remove('animate__fadeInDown');
            alert_modal.classList.add('animate__fadeOutDown');
            setTimeout(() => {
                document.getElementsByClassName('center-alert-modal')[0].style.zIndex = -1;
            }, 300);
        }
        document.getElementsByClassName('alert-yes')[0].onclick = function () {
            let request = new XMLHttpRequest();
            request.open('POST', "https://api.lks.helloxjn.com/share/v1", true);
            request.setRequestHeader("Content-type", "application/json");
            request.send(JSON.stringify({
                "author": author,
                "opus": opus,
                "tel": tel,
                "link": link,
                "about": about,
            }));
            request.onreadystatechange = () => {
                if (request.readyState === 4) {
                    let res = JSON.parse(request.responseText);
                    if (res.code == 1040) {
                        noticeModal('发送失败：你的请求已被过滤 (￣^￣)ゞ', 3000);
                    } else if (res.code == 1000) {
                        document.getElementById('author').value = '';
                        document.getElementById('opus').value = '';
                        document.getElementById('tel').value = '';
                        document.getElementById('link').value = '';
                        document.getElementById('about').value = '';
                        localStorage.setItem('is_sign_up', 1);
                        document.getElementsByClassName('go-page-home')[0].onclick();
                        noticeModal('已发送：感谢投稿 (゜-゜)つロ', 3000);
                    } else if (res.status == 429) {
                        noticeModal('发送失败：发送频率过高，请稍后再试！', 3000);
                    } else {
                        noticeModal('发送失败：服务器在摸鱼！', 3000);
                    }
                }
            }
            alert_modal.classList.remove('animate__fadeInDown');
            alert_modal.classList.add('animate__fadeOutDown');
            setTimeout(() => {
                document.getElementsByClassName('center-alert-modal')[0].style.zIndex = -1;
            }, 300);
        }
    }

    /*页面弹出的提示信息*/
    function confirm(msg, okCallback, cancleCallback) {
        if (document.getElementById('confirm')) return false;
        var div = document.createElement('div');
        div.id = 'confirm';
        div.innerHTML = msg;
        document.body.appendChild(div);
        let $confirm = document.getElementById('confirm');
        $confirm.classList.add('animate__animated');
        $confirm.classList.add('animate__fadeInRight');
        $confirm.classList.remove('animate__fadeOutRight');
        $confirm.classList.remove('animate__fadeOutLeft');
        document.getElementById('confirm').style.zIndex = 2000;
        document.getElementsByClassName('sure')[0].onclick = function (e) {
            setTimeout(() => {
                document.getElementById('confirm') && document.body.removeChild(document.getElementById('confirm'));
            }, 300);
            $confirm.classList.remove('animate__fadeInRight');
            $confirm.classList.add('animate__fadeOutLeft');
            $page_input.style.display = 'block';
            $page_input.classList.remove('animate__fadeOutRight');
            $page_input.classList.add('animate__fadeInRight');
            $page_input.style.zIndex = 999;
            $page_home.style.zIndex = 0;
            $page_home.classList.remove('animate__fadeInLeft');
            $page_home.classList.add('animate__fadeOutLeft');
            document.getElementById('confirm').style.zIndex = 0;
            e.stopPropagation();
        };
        document.getElementsByClassName('not')[0].onclick = function (e) {
            setTimeout(() => {
                document.getElementById('confirm') && document.body.removeChild(document.getElementById('confirm'));
            }, 300);
            $confirm.classList.remove('animate__fadeInRight');
            $confirm.classList.add('animate__fadeOutRight');
            document.getElementById('confirm').style.zIndex = 0;
            e.stopPropagation();
        };
    }
    function confirm_disclaimer(msg, okCallback, cancleCallback) {
        if (document.getElementById('confirm')) return false;
        var div = document.createElement('div');
        div.id = 'confirm';
        div.innerHTML = msg;
        document.body.appendChild(div);
        let $confirm = document.getElementById('confirm');
        $confirm.classList.add('animate__animated');
        $confirm.classList.add('animate__fadeIn');
        $confirm.classList.remove('animate__fadeOut');
        document.getElementById('confirm').style.zIndex = 2000;
        document.getElementsByClassName('close-disclaimer')[0].onclick = function (e) {
            setTimeout(() => {
                document.getElementById('confirm') && document.body.removeChild(document.getElementById('confirm'));
            }, 800);
            $confirm.classList.remove('animate__fadeIn');
            $confirm.classList.add('animate__fadeOut');
            document.getElementById('confirm').style.zIndex = 0;
            e.stopPropagation();
        };
    }

    // 初始化
    let $go_page_input = document.getElementsByClassName('go-page-input')[0];
    let $go_page_home = document.getElementsByClassName('go-page-home')[0];
    let $page_input = document.getElementsByClassName('page-input')[0];
    let $page_home = document.getElementsByClassName('page-home')[0];
    setTimeout(() => {
        $go_page_input.style.display = 'block';
        $go_page_input.classList.add('animate__zoomInDown');
    }, 80);
    setTimeout(() => {
        document.documentElement.style.setProperty('--animate-duration', '0.6s');
    }, 1200);

    // 页面切换
    $go_page_input.onclick = function () {
        if (!localStorage.getItem('is_sign_up')) {
            confirm(disclaimer);
        } else {
            noticeModal('您已报名成功', 1200);
        }
    };
    $go_page_home.onclick = function () {
        $page_home.classList.remove('animate__fadeOutLeft');
        $page_home.classList.add('animate__fadeInLeft');
        $page_home.style.zIndex = 999;
        $page_input.style.zIndex = 0;
        $page_input.classList.remove('animate__fadeInRight');
        $page_input.classList.add('animate__fadeOutRight');
    };

    // 倒计时
    function PrefixInteger(num, n) {
        return (Array(n).join(0) + num).slice(-n);
    }
    function getRTime() {
        let EndTime = new Date('2022/3/16 20:03:00');
        let NowTime = new Date();
        let t = EndTime.getTime() - NowTime.getTime();
        let d = Math.floor(t / 1000 / 60 / 60 / 24);
        let h = PrefixInteger(Math.floor(t / 1000 / 60 / 60 % 24), 2);
        let m = PrefixInteger(Math.floor(t / 1000 / 60 % 60), 2);
        let s = PrefixInteger(Math.floor(t / 1000 % 60), 2);
        if (d < 0){
            d = 0;
            h = 0;
            m = 0;
            s = 0;
            document.getElementById("t_d").innerHTML = "&#xe609;" + d + "天";
            document.getElementById("t_h").innerHTML = h + "时";
            document.getElementById("t_m").innerHTML = m + "分";
            document.getElementById("t_s").innerHTML = s + "秒";
            // noticeModal('活动结束');
        }else {
            document.getElementById("t_d").innerHTML = "&#xe609;" + d + "天";
            document.getElementById("t_h").innerHTML = h + "时";
            document.getElementById("t_m").innerHTML = m + "分";
            document.getElementById("t_s").innerHTML = s + "秒";
        }
    }
    getRTime();
    setInterval(getRTime, 1000);

    // 投稿
    let send = document.getElementById('send');
    send.onclick = function (e) {
        let author = document.getElementById('author').value;
        let opus = document.getElementById('opus').value;
        let tel = document.getElementById('tel').value;
        let link = document.getElementById('link').value;
        let about = document.getElementById('about').value;
        if (!author || !opus || !tel || !link || !about) {
            if (notice_modal.classList.contains('animate__fadeOutDown')) {
                noticeModal('请完整填写作品信息', 1200);
            }
        } else if (author.length > 32) {
            noticeModal('作品名过长，已超出128个字符的限制', 1200);
        } else if (opus.length > 32) {
            noticeModal('作品名过长，已超出128个字符的限制', 1200);
        } else if (tel.length > 64) {
            noticeModal('联系方式过长，已超出128个字符的限制', 1200);
        } else if (link.length > 32) {
            noticeModal('作品链接过长，已超出256个字符的限制', 1200);
        } else if (about.length > 1024) {
            noticeModal('作品说明过长，已超出1024个字符的限制', 1200);
        } else if (!notice_modal.classList.contains('animate__fadeInDown')) {
            alertModal('是否确认发送');
        }
        e.stopPropagation();
    };

    // 免责声明
    let disclaimer_footer = `
        <div class="confirms container">
            <div class="col-md-8 offset-md-2">
                <p class="confirm-title">活动信息</p>
                <div class="confirm-text confirm-disclaimer-text">
                    <p>每个人在生命中都会创造一些美好的东西，它们往往倾注了我们大量的心血，如果你愿意与大家分享你的作品，欢迎大力投稿参与这次活动:D</p>
                    <p>详情请见 - BVXXXXXXXXX</p>
                    <p class="little-title">【基本规则】</p>
                    <p>1. 可以投稿任何类型的作品，音乐、绘画、摄影、文字、有实体的手工/雕塑/模型、甚至某个天马行空的想法等等。</p>
                    <p>2. 作品需要上传到网盘或视频平台(实物作品可以拍照/拍视频后上传)。</p>
                    <p>3. 这件作品需要由你本人独立/主要完成，不能为别人代投。</p>
                    <p>4. 这件作品的完成时间需要在2020年以后。</p>
                    <p>5. 这件作品不能存在版权/知识产权/著作权/原创性等方面的争议。</p>
                    <p>6. 请准确填写投稿信息，以便获奖后我可以联系到你。</p>
                    <p class="little-title">【活动信息】</p>
                    <p>1. 征集从2022年x月x日开始持续到2022年x月x日，此后投稿功能会被关闭。</p>
                    <p>2. 征集将选出金奖、银奖和铜奖以及10个优秀提名，奖品分别是：</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;金奖 - 人民币X元+板状海蓝宝石晶体共生叶钠长石 (配图)</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;银奖 - 人民币X元+连晶黄铁矿 (配图)</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;铜奖 - 人民币X元+荧光方解石晶体 (配图)</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;优秀奖 - ?</p>
                    <p class="little-title">【免责声明】</p>
                    <p>投稿作品即表示你已经阅读并同意以下说明：</p>
                    <p>1. 你清楚并同意上传的作品可能会被公开分享。</p>
                    <p>2. 全程遵守国家法律与政策，请勿上传各类违规/敏感内容，即使上传也会被人工筛选和删除。</p>
                    <p>3. 避免上传非原创、未经创作者本人许可、存在大量参考借鉴的内容，对作品的原创性负责。</p>
                    <p>4. 本征集为非盈利活动，无任何利益相关。</p>
                    <p>5. 如活动期间遇到不可抗力或其他意外因素，征集可能会被迫中止。</p>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <span class="btn close-disclaimer col-md-12">返回</span>
                    </div>
                </div>
            </div>
        </div>`;
    document.getElementsByClassName('disclaimer-btn')[0].onclick = function () {
        confirm_disclaimer(disclaimer_footer);
    }

</script>
<!-- <script defer src="js/defer.js"></script> -->

</html>